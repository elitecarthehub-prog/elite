<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ELITE CART</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Poppins',sans-serif;background:#fff;color:#111;overflow-x:hidden}
a{text-decoration:none;color:inherit}
button{cursor:pointer;font-family:inherit}

/* ANNOUNCEMENT */
.announcement{
  background:#111;color:#fff;
  overflow:hidden;white-space:nowrap;
  font-size:14px;font-weight:600;
  text-transform:uppercase
}
.announcement-track{
  display:inline-block;padding:10px 0;
  animation:scroll 12s linear infinite
}
.announcement-track span{margin:0 35px}
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* HEADER */
.header{
  position:sticky;top:0;z-index:1000;
  background:#fff;
  display:flex;align-items:center;
  justify-content:space-between;
  padding:18px 6%;
  box-shadow:0 3px 20px rgba(0,0,0,.05)
}
.left-area{display:flex;align-items:center;gap:30px}
.nav{display:flex;gap:25px;font-weight:600;font-size:15px;text-transform:uppercase}
.logo img{height:50px}
.right-icons{display:flex;gap:15px}
.icon-btn{
  width:44px;height:44px;
  border-radius:50%;
  display:flex;align-items:center;
  justify-content:center;
  transition:.3s;position:relative
}
.icon-btn:hover{background:#f2f2f2}
.cart-badge{
  position:absolute;top:5px;right:5px;
  background:#e60023;width:18px;height:18px;
  border-radius:50%;font-size:11px;
  color:#fff;display:flex;
  align-items:center;justify-content:center
}

/* MOBILE MENU */
.menu-toggle{display:none}
.mobile-menu{
  position:fixed;top:0;left:-280px;
  width:280px;height:100%;
  background:#fff;padding:30px 25px;
  box-shadow:0 0 40px rgba(0,0,0,.2);
  transition:.35s;z-index:2000
}
.mobile-menu.active{left:0}
.mobile-menu-header{
  display:flex;justify-content:space-between;
  margin-bottom:30px;font-weight:600
}
.mobile-menu a{
  display:block;margin-bottom:20px;
  font-size:17px;font-weight:600;
  text-transform:uppercase
}

/* SEARCH */
.search-dropdown{
  position:absolute;top:90px;right:6%;
  width:320px;background:#fff;
  box-shadow:0 15px 40px rgba(0,0,0,.1);
  padding:20px;border-radius:14px;
  display:none;z-index:1500
}
.search-dropdown.active{display:block}
.search-dropdown input{
  width:100%;padding:12px;
  font-size:16px;border:1px solid #ddd;
  border-radius:10px
}

/* HERO */
.hero{position:relative;height:480px;overflow:hidden}
.slide{
  position:absolute;width:100%;height:100%;
  opacity:0;transition:opacity .8s ease
}
.slide img{width:100%;height:100%;object-fit:cover}
.slide.active{opacity:1}

/* PRODUCTS */
.section{padding:80px 6%}
.section h2{
  font-size:28px;margin-bottom:45px;
  text-transform:uppercase
}
.products-grid{
  display:grid;grid-template-columns:repeat(4,1fr);
  gap:28px
}
.product-card{
  border:1px solid #eee;
  border-radius:20px;
  overflow:hidden;
  transition:.3s;cursor:pointer;
  background:#fff;position:relative
}
.product-card:hover{
  transform:translateY(-8px);
  box-shadow:0 20px 40px rgba(0,0,0,.08)
}
.discount-badge{
  position:absolute;top:12px;left:12px;
  background:#e60023;color:#fff;
  font-size:12px;font-weight:600;
  padding:6px 10px;border-radius:20px
}
.product-card img{
  width:100%;height:260px;object-fit:cover
}
.product-info{padding:20px}
.product-info h3{
  font-size:16px;margin-bottom:8px;
  text-transform:capitalize
}
.price-row{
  display:flex;align-items:center;
  gap:10px;margin-bottom:15px
}
.old-price{
  text-decoration:line-through;
  color:#777;font-size:14px
}
.new-price{
  font-weight:700;font-size:18px
}
.product-info button{
  width:100%;padding:12px;
  border:none;border-radius:30px;
  background:#111;color:#fff;
  font-size:14px;text-transform:uppercase
}

/* FEATURES */
.features{
  background:#f7f7f7;
  padding:70px 6%;
  display:flex;justify-content:space-between;
  gap:40px;text-align:center
}
.feature-box h4{
  margin:12px 0;font-size:17px;
  text-transform:uppercase
}

/* FOOTER */
footer{
  background:#111;color:#ccc;
  padding:80px 6%
}
.footer-grid{
  display:grid;grid-template-columns:repeat(4,1fr);
  gap:40px
}
footer h4{
  color:#fff;margin-bottom:15px;
  text-transform:uppercase
}
footer a{
  display:block;margin-bottom:8px;
  font-size:14px;text-transform:capitalize
}
.footer-bottom{
  text-align:center;margin-top:40px;
  font-size:14px
}

/* CART */
.overlay{
  position:fixed;top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,.3);
  backdrop-filter:blur(5px);
  opacity:0;visibility:hidden;
  transition:.3s;z-index:2500
}
.overlay.active{opacity:1;visibility:visible}

.cart-drawer{
  position:fixed;top:0;right:-420px;
  width:420px;height:100%;
  background:#fff;padding:30px;
  box-shadow:-20px 0 60px rgba(0,0,0,.15);
  transition:.4s;z-index:3000;
  display:flex;flex-direction:column
}
.cart-drawer.active{right:0}
.cart-header{
  display:flex;justify-content:space-between;
  margin-bottom:20px;font-weight:600
}
#cartItems{flex:1;overflow-y:auto}
.cart-item{
  display:flex;gap:15px;margin-bottom:20px
}
.cart-item img{
  width:75px;height:75px;
  object-fit:cover;border-radius:10px
}
.qty-controls{
  display:flex;gap:10px;margin-top:8px
}
.qty-controls button{
  width:28px;height:28px;
  border:1px solid #ddd;background:#fff
}
.cart-footer{
  border-top:1px solid #eee;padding-top:20px
}
.cart-footer button{
  width:100%;padding:14px;
  border:none;border-radius:30px;
  background:#111;color:#fff
}

/* RESPONSIVE */
@media(max-width:1024px){
  .products-grid{grid-template-columns:repeat(2,1fr)}
}
@media(max-width:768px){
  .nav{display:none}
  .menu-toggle{display:flex}
  .logo{position:absolute;left:50%;transform:translateX(-50%)}
  .hero{height:280px}
  .products-grid{grid-template-columns:repeat(2,1fr);gap:16px}
  .features{flex-direction:column}
}
</style>
</head>

<body>

<div class="announcement">
  <div class="announcement-track">
    <span>Free Shipping</span>
    <span>Secure Checkout</span>
    <span>Easy Returns</span>
    <span>Premium Quality</span>
    <span>Limited Offer</span>
    <span>Free Shipping</span>
  </div>
</div>

<div class="header">
  <div class="left-area">
    <div class="menu-toggle" onclick="openMenu()">
      <svg width="24" height="24" stroke="#111" stroke-width="2" fill="none">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </div>
    <div class="nav">
      <a href="#">Home</a>
      <a href="#">Shop</a>
      <a href="#">Collections</a>
      <a href="#">Contact</a>
    </div>
  </div>

  <div class="logo"><img src="Logo.png"></div>

  <div class="right-icons">
    <div class="icon-btn" onclick="toggleSearch()">
      <svg width="22" height="22" fill="none" stroke="#111" stroke-width="2">
        <circle cx="10" cy="10" r="8"/>
        <line x1="16" y1="16" x2="22" y2="22"/>
      </svg>
    </div>
    <div class="icon-btn" onclick="openCart()">
      <svg width="22" height="22" fill="none" stroke="#111" stroke-width="2">
        <circle cx="9" cy="20" r="1"/>
        <circle cx="17" cy="20" r="1"/>
        <path d="M2 2h3l3.6 7.6a2 2 0 001.8 1.2h6.5a2 2 0 001.9-1.4L22 6H6"/>
      </svg>
      <div class="cart-badge" id="cartBadge">0</div>
    </div>
  </div>
</div>

<div class="mobile-menu" id="mobileMenu">
  <div class="mobile-menu-header">
    <span>Menu</span>
    <span onclick="closeMenu()">âœ•</span>
  </div>
  <a href="#">Home</a>
  <a href="#">Shop</a>
  <a href="#">Collections</a>
  <a href="#">Contact</a>
</div>

<div class="overlay" id="overlay" onclick="closeAll()"></div>

<div class="search-dropdown" id="searchDropdown">
  <input type="text" id="searchInput" placeholder="Search Products...">
</div>

<div class="hero">
  <div class="slide active"><img src="sale-banner1.png"></div>
  <div class="slide"><img src="sale-banner1.png"></div>
</div>

<div class="section">
  <h2>Featured Products</h2>
  <div class="products-grid" id="products"></div>
</div>

<div class="features">
  <div class="feature-box">
    <h4>Free Delivery</h4>
    <p>On prepaid orders.</p>
  </div>
  <div class="feature-box">
    <h4>Secure Payments</h4>
    <p>Encrypted checkout.</p>
  </div>
  <div class="feature-box">
    <h4>Easy Returns</h4>
    <p>7-day policy.</p>
  </div>
</div>

<div class="cart-drawer" id="cartDrawer">
  <div class="cart-header">
    <span>Your Cart</span>
    <span onclick="closeCart()">âœ•</span>
  </div>
  <div id="cartItems"></div>
  <div class="cart-footer">
    Total: â‚¹<span id="cartTotal">0</span>
    <button>Checkout</button>
  </div>
</div>

<footer>
  <div class="footer-grid">
    <div>
      <h4>Shop</h4>
      <a href="#">All Products</a>
      <a href="#">New Arrivals</a>
    </div>
    <div>
      <h4>Company</h4>
      <a href="#">About Us</a>
      <a href="#">Careers</a>
    </div>
    <div>
      <h4>Support</h4>
      <a href="#">Shipping</a>
      <a href="#">Returns</a>
    </div>
    <div>
      <h4>Legal</h4>
      <a href="#">Privacy Policy</a>
      <a href="#">Terms</a>
    </div>
  </div>
  <div class="footer-bottom">
    Â© 2024 ELITE CART
  </div>
</footer>

<script>
const API_BASE = "https://elite-cart-three.vercel.app";

function getGuestId() {
  let guestId = localStorage.getItem("guestId");
  if (!guestId) {
    guestId = "guest_" + Math.random().toString(36).substring(2, 15);
    localStorage.setItem("guestId", guestId);
  }
  return guestId;
}

let cart = [];

const products = [
  {productId:"1",name:"Royal Enfield Model",old:1290,new:129,image:"Bullet.jpg",link:"product_page.html"},
  {productId:"2",name:"Chelsea Boots",old:1499,new:249,image:"Boots.webp",link:"product_page1.html"},
  {productId:"3",name:"Hair Styler",old:1599,new:349,image:"Styler.jpg",link:"styler.html"},
  {productId:"4",name:"Earrings Set",old:1299,new:229,image:"earings.jpg",link:"earings.html"}
];

function renderProducts(filter=""){
  const container=document.getElementById("products");
  container.innerHTML="";
  products
  .filter(p=>p.name.toLowerCase().includes(filter.toLowerCase()))
  .forEach((p,i)=>{
    const discount=Math.round(((p.old-p.new)/p.old)*100);
    container.innerHTML+=`
      <div class="product-card" onclick="window.location.href='${p.link}'">
        <div class="discount-badge">${discount}% OFF</div>
        <img src="${p.image}">
        <div class="product-info">
          <h3>${p.name}</h3>
          <div class="price-row">
            <span class="old-price">â‚¹${p.old}</span>
            <span class="new-price">â‚¹${p.new}</span>
          </div>
          <button onclick="event.stopPropagation();addToCart(${i})">
            Add To Cart
          </button>
        </div>
      </div>`;
  });
}

async function addToCart(i){
  const guestId = getGuestId();
  const product = products[i];

  await fetch(`${API_BASE}/api/cart?guestId=${guestId}`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({item:product})
  });

  await loadCart();
}

async function loadCart(){
  const guestId = getGuestId();
  const res = await fetch(`${API_BASE}/api/cart?guestId=${guestId}`);
  const data = await res.json();
  cart = data.items || [];
  updateCart();
}

function updateCart(){
  document.getElementById("cartBadge").innerText =
    cart.reduce((sum,item)=>sum+item.qty,0);
  renderCart();
}

function renderCart(){
  const container=document.getElementById("cartItems");
  const totalElement=document.getElementById("cartTotal");
  container.innerHTML="";
  let total=0;

  cart.forEach((item,index)=>{
    total += item.new * item.qty;

    container.innerHTML+=`
      <div class="cart-item">
        <img src="${item.image}">
        <div style="flex:1">
          <div>${item.name}</div>
          <div>â‚¹${item.new}</div>
          <div class="qty-controls">
            <button onclick="changeQty(${index},-1)">-</button>
            ${item.qty}
            <button onclick="changeQty(${index},1)">+</button>
          </div>
        </div>
      </div>`;
  });

  totalElement.innerText = total;
}

/* ðŸ”¥ FIXED QTY LOGIC */
async function changeQty(index, amount){
  const guestId = getGuestId();
  const item = cart[index];
  const newQty = item.qty + amount;

  if(newQty <= 0){
    await fetch(`${API_BASE}/api/cart?guestId=${guestId}`,{
      method:"DELETE",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({ productId: item.productId })
    });
  } else {
    await fetch(`${API_BASE}/api/cart?guestId=${guestId}`,{
      method:"PUT",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        productId: item.productId,
        qty: newQty
      })
    });
  }

  await loadCart();
}

function openCart(){
  document.getElementById("cartDrawer").classList.add("active");
  document.getElementById("overlay").classList.add("active");
}
function closeCart(){
  document.getElementById("cartDrawer").classList.remove("active");
  document.getElementById("overlay").classList.remove("active");
}
function toggleSearch(){
  document.getElementById("searchDropdown").classList.toggle("active");
}
function openMenu(){
  document.getElementById("mobileMenu").classList.add("active");
}
function closeMenu(){
  document.getElementById("mobileMenu").classList.remove("active");
}
function closeAll(){
  closeCart();closeMenu();
}

document.getElementById("searchInput")
.addEventListener("keyup",function(){
  renderProducts(this.value);
});

let slides=document.querySelectorAll(".slide");
let slideIndex=0;
setInterval(()=>{
  slides[slideIndex].classList.remove("active");
  slideIndex=(slideIndex+1)%slides.length;
  slides[slideIndex].classList.add("active");
},4000);

renderProducts();
loadCart();
</script>



</body>
</html>


